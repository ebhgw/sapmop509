[_Adapter|Run AllarmiContatori]
command=
context=element
description=_Adapter|Run AllarmiContatori
hidden=false
operation=load( 'util/bdievent' );\n//formula.log.info('Adapter ' + element.Name);\nfireBDIEvent( 'RunOnce' , element.Name );
permission=manage
target=namematch:Adapter: AllarmiContatori
type=serverscript

[_Adapter|Run ImpModello]
command=
context=element
description=_Adapter|Run ImpModello
hidden=false
operation=load( 'util/bdievent' );\n//formula.log.info('Adapter ' + element.Name);\nfireBDIEvent( 'RunOnce' , element.Name );
permission=manage
target=namematch:Adapter: ImpModello
type=serverscript

[_Adapter|run process data on db]
command=
context=element
description=_Adapter|run process data on db
hidden=false
operation=(function () {\n    var _logger = Packages.org.apache.log4j.Logger.getLogger("fs.impbaseline.importer");\n    _logger.info('Operation run process data on db started');\n    load('custom/util/Properties.fs');\n    var imp_baseline_prop = Properties.loadCustomConfig('ImpBaseline');\n    load('custom/modello/impbaseline/TlndCmder.fs');\n    var tcmdr = TlndCmder(imp_baseline_prop);\n    tcmdr.processDataOnDb ();\n    _logger.info('Operation run process data on db completed');\n   return true;\n}) ();
permission=manage
target=dname:ImpModello=Adapter%3A+ImpModello/root=Elements
type=serverscript

[_Adapter|Run tAllarmiOUTv2]
command=
context=element
description=_Adapter|Run tAllarmiOUTv2
operation=load( 'util/bdievent' );\nfireBDIEvent( 'RunOnce' , 'Adapter: tAllarmiOUTv2' )
permission=manage
target=dname:tAllarmiOUTv2=Adapter%3A+tAllarmiOUTv2/root=Elements
type=serverscript

[_Alarm|Copy Properties to Clipboard]
command=
context=alarm
description=_Alarm|Copy Properties to Clipboard
operation=load('custom/operation/sendAlarmPropertiesToClipboard.fs');
permission=access
target=dnamematch:.*
type=clientscript

[_Element|Count CI]
command=
context=element
description=_Element|Count CI
operation=var visitor =\n{\n    count: 0,\n    visit: function ( child )\n    {\n        visitor.count++;\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Counted ' + visitor.count + ' element');
permission=access
target=namematch:.*
type=serverscript

[_Element|Count|Acronimo]
command=
context=element
description=_Element|Count|Acronimo
operation=var visitor =\n{\n    count: 0,\n    clazz: '',\n    visit: function ( child )\n    {\n\tclazz = child.elementClassName\n\tif (clazz=='Acronimo' || clazz=='LivelloAcronimo')\n        \tvisitor.count++;\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Counted ' + visitor.count + ' element of class Acronimo/LivelloAcronimo');
permission=view
target=namematch:.*
type=serverscript

[_Element|Count|CompInfra]
command=
context=element
description=_Element|Count|CompInfra
operation=var visitor =\n{\n    count: 0,\n    clazz: '',\n    visit: function ( child )\n    {\n\tclazz = child.elementClassName\n\tif (clazz=='CompInfra' || clazz=='LivelloCompInfra')\n        \tvisitor.count++;\n    }\n}\n\nelement.walk ( visitor );\nsession.sendMessage('Counted ' + visitor.count + ' element of class CompInfra/LivelloCompInfra');
permission=view
target=namematch:.*
type=serverscript

[_Element|Count|Element in Subtree]
command=
context=element
description=_Element|Count|Element in Subtree
operation=var visitor = {\ncount: 0,\nfound: false,\nvisit: function ( child )\n\t{\n\t\tvisitor.count++;\n\t}\n}\nelement.walk ( visitor );\nsession.sendMessage('Found ' + visitor.count + ' elements');
permission=view
target=dnamematch:.*
type=serverscript

[_Element|Count|ElementoTecno]
command=
context=element
description=_Element|Count|Elemento Tecno
operation=var visitor =\n{\n    count: 0,\n    clazz: '',\n    visit: function ( child )\n    {\n\tclazz = child.elementClassName\n\tif (clazz=='CompInfra' || clazz=='LivelloCompInfra')\n        \tvisitor.count++;\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Counted ' + visitor.count + ' element of class CompInfra/LivelloCompInfra');
permission=view
target=namematch:.*
type=serverscript

[_Element|Count|QLOCAL.DATAGRAM]
command=
context=element
description=_Element|Count|QLOCAL.DATAGRAM
operation=var visitor =\n{\n    count: 0,\n    clazz: '',\n    visit: function ( child )\n    {\n\tclazz = child.elementClassname + '';\n\tif (clazz == 'Risorsa' && child.name.toLowerCase().indexOf('qlocal.datagram') !=-1)\n        \tvisitor.count++;\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Counted ' + visitor.count + ' with name *QLOCAL.DATAGRAM*');
permission=view
target=namematch:.*
type=serverscript

[_Element|Count|Risorsa]
command=
context=element
description=_Element|Count|Risorsa
operation=var visitor =\n{\n    count: 0,\n    clazz: '',\n    visit: function ( child )\n    {\n\tclazz = child.elementClassName\n\tif (clazz=='Risorsa' || clazz=='LivelloRisorsa')\n        \tvisitor.count++;\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Counted ' + visitor.count + ' element of class Risorsa/LivelloRisorsa');
permission=view
target=namematch:.*
type=serverscript

[_Element|Count|Servizio]
command=
context=element
description=_Element|Count|Servizio
operation=var visitor =\n{\n    count: 0,\n    clazz: '',\n    visit: function ( child )\n    {\n\tclazz = child.elementClassName\n\tif (clazz=='Servizio' || clazz=='LivelloServizio')\n        \tvisitor.count++;\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Counted ' + visitor.count + ' element of class Servizio/LivelloServizio');
permission=view
target=namematch:.*
type=serverscript

[_Element|Delete|Delete Children]
command=
context=element
description=_Element|Delete|Delete Children
operation=var child = ''\nfor (var i = element.children.length-1; i >= 0; i--)\nelement.children[i].perform( session, 'LifeCycle|Delete', [], [] );
permission=manage
target=namematch:.*
type=serverscript

[_Element|Delete|Delete duplicates]
command=
context=element
description=_Element|Delete|Delete duplicates
operation=var chdn = element.Children;\nvar patt = new RegExp (/Acronimo=.{5}\\+%283%29/);\nvar dn;\nfor (var i  = chdn.length-1; i >=0; i--) {\n    dn = chdn[i];\n    if (patt.exec(dn))\r\r {\n\tformula.log.info('Deleting ' + dn);\n\tstate.Orgs.deleteDn(dn);\n    }\n};\nsession.sendMessage('Operation completed');
permission=manage
target=namematch:.*
type=serverscript

[_Element|Display Children]
command=
context=element
description=_Element|Display Children
hidden=false
operation=element.DisplaySourceElements="true"
permission=view
target=dnamematch:.*
type=serverscript

[_Element|Properties|Children Copy (from Gen Mod)]
command=
context=element
description=_Element|Properties|Children Copy (from Gen Mod)
operation=load('custom/orgs/ElementProps.fs');\nelementProps.copyFromGenModintoChildren(element);
permission=manage
target=namematch:.*
type=serverscript

[_Element|Properties|Copy (from Gen Mod)]
command=
context=element
description=_Element|Properties|Copy (from Gen Mod)
operation=load('custom/orgs/ElementProps.fs');\nelementProps.copyFromGenMod(element);
permission=manage
target=namematch:.*
type=serverscript

[_Element|Remove non contrib mark]
command=
context=element
description=_Element|Remove non contributing mark
operation=load('custom/operation/RemoveNonContributing.fs');
permission=manage
target=namematch:.*
type=serverscript

[_Element|Send DName to clipboard]
command=
context=element
description=_Element|Send DName to clipboard
operation=@util/sendDNameToClipboard.fs
permission=manage
target=namematch:.*
type=clientscript

[_Element|Send Name to clipboard]
command=
context=element
description=_Element|Send Name to clipboard
hidden=false
operation=@custom/util/sendNameToClipboard.fs
permission=manage
target=namematch:.*
type=clientscript

[_Element|Send Operations to clipboard]
command=
context=element
description=_Element|Send Operations to clipboard
operation=@util/sendOpsToClipboard.fs
permission=manage
target=namematch:.*
type=clientscript

[_Element|Send Properties to clipboard]
command=
context=element
description=_Element|Send Properties to clipboard
operation=@util/sendElementPropertiesToClipboard.fs
permission=manage
target=namematch:.*
type=clientscript

[_Graphic|Set Drawing Template On Subtree]
command=
context=element
description=_Graphic|Set Drawing Template On Subtree
operation=var _logger = Packages.org.apache.log4j.Logger.getLogger('fs.operation');\nvar visitor =\n{\ncount: 0,\nvisit: function ( child )\n{\nchild['SVG_DrawingTemplate']='graphic=default_0/graphicsFolder=Templates/graphics=Graphics/root=Administration'\nvisitor.count++;\n}\n}\nelement.walk ( visitor );\n_logger.info('Set default_0 template on ' + visitor.count + ' under ' + element.DName);
permission=manage
target=dname:PortletView=Banca+Koper+-+Tech+View/gen_folder=Grafici/gen_folder=Banca+Koper/gen_folder=Produzione/Community=Banche+Estere/gen_folder=Views/Dashboard=Dashboard/root=Organizations
type=serverscript

[_Graphic|Tree|Set Nodestyle 4 Switch]
command=
context=element
description=_Graphic|Tree|Set Nodestyle 4 Switch
operation=var _logger = Packages.org.apache.log4j.Logger.getLogger('fs.operation');\nvar visitor =\n{\ncount: 0,\nvisit: function ( child )\n{\nvar clazz=child.elementClassname + '';\nif (clazz==='Switch') {\nchild['SVG_Nodestyle']='graphic=TLCSwitch/graphicsFolder=ISP/graphicsFolder=Nodes/graphics=Graphics/root=Administration'\nvisitor.count++;\n}\n}\n}\nelement.walk ( visitor );\n_logger.info('Set default_0 template on ' + visitor.count + ' under ' + element.DName);
permission=manage
target=dname:net_intranet=Expo/Servizio=TLC/ServizioGlobalView=TLC/gen_folder=Servizio+TLC/ISP_FolderBase=Production/root=Organizations
type=serverscript

[_Server|Adapter Restart]
command=
context=element
description=_Server|Adapter Restart
operation=formula.log.info('Restarting adapter ' + element.name);\nstate.AdaptersUtil.restartAdapter(element.name);
permission=manage
target=script:element.parent.Dname=='root=Elements'
type=serverscript

[_Server|Adapter|Restart ImpModel]
command=
context=element
description=_Server|Adapter|Restart ImpModel
operation=state.AdaptersUtil.restartImpModel()
permission=manage
target=dname:ImpModello=Adapter%3A+ImpModello/root=Elements
type=serverscript

[_Server|Adapter|Run ImpModel]
command=
context=element
description=_Server|Adapter|Run Schedule ImpModel
operation=load( 'util/bdievent' );\nfireBDIEvent( 'RunOnce' , 'Adapter: ImpModello' )
permission=manage
target=dname:ImpModello=Adapter%3A+ImpModello/root=Elements
type=serverscript

[_Server|Create Snapshot]
command=
context=element
description=_Server|Create Snapshot
operation=formula.util.snapshotConfig();\nvar odbDir = Packages.java.lang.System.getProperty('formula.home') + '\\\\' + 'configstore'\r\r;\nsession.sendMessage('Odb written to ' +  odbDir);
permission=access
target=dname:formulaServer=Server/root=Administration
type=serverscript

[_Server|Dump Thread]
command=
context=element
description=_Server|Dump Thread
operation=var map = Packages.java.lang.Thread.getAllStackTraces()\nvar it = map.keySet().iterator()\n\nwhile(it.hasNext()) {\n  var key = it.next()\n  var value = map.get(key)\n  formula.log.info(key)\n  for(i=0; i < value.length; i++) {\n    formula.log.info(value[i])\n  }\n  formula.log.info("\\n")\n}
permission=view
target=dname:formulaServer=Server/root=Administration
type=serverscript

[_Server|Export Config to XML]
command=
context=element
description=_Server|Export Config to XML
operation=load('custom/util/exportElementConfig.fs')
permission=manage
target=namematch:.*
type=serverscript

[_Server|Force Critical]
command=
context=element
description=_Server|Set Algorithm|<html><body><b><font color="red">_forceCritical</font></b></body></html>
operation=element.setConditionAlgorithm( "_forceCritical" );\nelement.algorithmChanged();
permission=define
target=script:element.usesAlgorithms()
type=serverscript

[_Server|Force Major]
command=
context=element
description=_Server|Set Algorithm|<html><body><b><font color="#FFAA2A">_forceMajor</font></b></body></html>
operation=element.setConditionAlgorithm( "_forceMajor" );\nelement.algorithmChanged();
permission=define
target=script:element.usesAlgorithms()
type=serverscript

[_Server|Force Minor]
command=
context=element
description=_Server|Set Algorithm|<html><body><b><font color="yellow">_forceMinor</font></b></body></html>
operation=element.setConditionAlgorithm( "_forceMinor" );\nelement.algorithmChanged();
permission=define
target=script:element.usesAlgorithms()
type=serverscript

[_Server|Force OK]
command=
context=element
description=_Server|Set Algorithm|<html><body><b><font color="green">_forceOk</font></b></body></html>
operation=element.setConditionAlgorithm( "_forceOk" );\nelement.algorithmChanged();
permission=define
target=script:element.usesAlgorithms()
type=serverscript

[_Server|Force Unknow]
command=
context=element
description=_Server|Set Algorithm|<html><body><b><font color="gray">_forceUnknow</font></b></body></html>
operation=element.setConditionAlgorithm( "_forceUnknown" );\nelement.algorithmChanged();
permission=define
target=script:element.usesAlgorithms()
type=serverscript

[Administration|Load Formula Start Libraries]
command=
context=element
description=Administration|Load Formula Start Libraries
operation=load('custom/formula_onstarted.fs');
permission=define
target=dname:formula=formula/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Alerter|Email alarms count report]
command=
context=element
description=Email alarms count report
operation=load('custom/alerter/CheckAlarmCount.fs');\nif (chAlco.checkAndForceEmail()== 0)\nsession.sendMessage('Sent alarms count report email')\nelse\nsession.sendMessage('Failure on alarms count report email')
permission=view
target=dname:formula_administration=Module%3AAlerter/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Alerter|Log diffs]
command=
context=element
description=Log Diffs
operation=load('custom/alerter/DiffOnAlarms.fs');
permission=view
target=dname:ISP_FolderBase=SystemTest/root=Organizations
type=serverscript

[Alerter|Show alarms count]
command=
context=element
description=Show alarms count
operation=load('custom/alerter/CheckAlarmCount.fs');chAlco.checkAndPopUp();
permission=view
target=dname:formula_administration=Module%3AAlerter/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Ambiente|set Produzione]
command=
context=element
description=Ambiente|set Produzione
operation=(function () {\nvar visitor =\n{\n    count: 0,\n    visit: function ( child )\n    {\n        clazz = child.elementClassname + '';\n\t\tif (clazz == 'Servizio' || clazz == 'Acronimo' || clazz == 'AcronimoOpVw') {\n\t\t\tchild['Ambiente'] = 'Produzione';\n\t\t\tvisitor.count++;\n\t\t}\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Set ' + visitor.count + ' elements to Produzione');\n\n})();
permission=manage
target=dnamematch:Dashboard=Dashboard/root=Organizations|ISP_FolderBase=SandboxProduzione/root=Organizations
type=serverscript

[Ambiente|set SystemTest]
command=
context=element
description=Ambiente|set SystemTest
operation=(function () {\nvar visitor =\n{\n    count: 0,\n    visit: function ( child )\n    {\n        clazz = child.elementClassname + '';\n\t\tif (clazz == 'Servizio' || clazz == 'Acronimo'|| clazz == 'AcronimoOpVw') {\n\t\t\tchild['Ambiente'] = 'SystemTest';\n\t\t\tvisitor.count++;\n\t\t}\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Set ' + visitor.count + ' elements to SystemTest');\n\n})();
permission=manage
target=dnamematch:ISP_FolderBase=SystemTest/root=Organizations|ISP_FolderBase=SandboxSystemTest/root=Organizations
type=serverscript

[CSC|ReportAllarmi]
command=
context=element
description=CSC|ReportAllarmi
operation=load('custom/FSA/SendQAlarms.fs');\nformula.log.info('Generating report for user ' +  args[0]);\nsendQAlarmsOnArgs(args);
permission=view
target=dname:logo_managedobjects=ReportAllarmi/root=Generational+Models/root=Services
type=serverscript

[Dashboard Structure|Build Portlet View]
command=
context=element
description=Dashboard Structure|Build Portlet View
operation=load('custom/dashboard/buildServiceView.fs');
permission=define
target=dname:gen_folder=Service+Views/Dashboard=Dashboard/root=Organizations
type=serverscript

[ECM|Action List from Console]
command=
context=alarm
description=ECM::Action List
hidden=false
operation=applet.getAppletContext().showDocument(new java.net.URL('http://10.2.230.39:4094/NocActionListsReader.aspx?sourceCell=Allarmi&eventHandle='+alarm.event_handle), 'Action List')
permission=view
target=dname:root=Organizations
type=clientscript

[ECM|New|Add Note]
command=
context=alarm
description=ECM::Add Note
operation=load('custom/ecmop/AddNote.fs');
permission=view
target=script:true
type=serverscript

[ECM|New|Add Ticket]
command=
context=alarm
description=ECM::Add Ticket
operation=load('custom/ecmop/AddTicket.fs');
permission=view
target=script:alarm.status.toLowerCase()!='closed'
type=serverscript

[ECM|New|Close Event]
command=
context=alarm
description=ECM::Close Event
operation=load('custom/ecmop/CloseEvent.fs');
permission=view
target=script:alarm.status.toLowerCase()!='closed'
type=serverscript

[ECM|New|Decline Ownership]
command=
context=alarm
description=ECM::Decline Ownership
operation=load('custom/ecmop/DeclineOwnership.fs');
permission=view
target=script:alarm.status.toLowerCase()=='assigned' && state.DNamer.getUserFromDname(user.DName).toLowerCase()==alarm.mc_owner.toLowerCase()
type=serverscript

[ECM|New|Open Ticket]
command=
context=alarm
description=ECM::Open Ticket
operation=load('custom/ecmop/OpenTicket.fs');
permission=view
target=script:alarm.status.toLowerCase()!='closed' && alarm.Ticket_Num==''
type=serverscript

[ECM|New|Take Ownership]
command=
context=alarm
description=ECM::Take Ownership
operation=load('custom/ecmop/TakeOwnership.fs');
permission=view
target=script:(alarm.status.toLowerCase()=='open'||alarm.status.toLowerCase()=='ack')
type=serverscript

[ECM|Properties|Reload]
command=
context=element
description=Reload Properties
operation=Packages.com.hog.noc.props.NOCPropLoader.reloadCustomProperties('EcmOperation');\nsession.sendMessage('Operation completed');
permission=define
target=dname:formula_administration=Module%3AECM/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[ECM|Properties|To Log]
command=
context=element
description=Dump to Log
operation=Packages.com.hog.noc.props.NOCPropLoader.logProperties('EcmOperation');\nsession.sendMessage('Operation completed');
permission=define
target=dname:formula_administration=Module%3AECM/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Export|Download Allarmi 48 ore]
command=
context=element
description=Download Allarmi 48 ore
operation=load('custom/operation/collectAlarm48hoursData.fs');
permission=view
target=dnamematch:^formula_administration=Module%3AModelExporter/logo_managedobjects=Administration/root=Generational\\+Models/root=Services
type=serverscript

[Export|Download Baseline Completa]
command=
context=element
description=Download Baseline Completa
operation=load('custom/operation/collectBaselineData.fs');
permission=view
target=dnamematch:^formula_administration=Module%3AModelExporter/logo_managedobjects=Administration/root=Generational\\+Models/root=Services
type=serverscript

[Export|Download Baseline Servizi/Acronimi]
command=
context=element
description=Download Baseline Servizi/Acronimi
operation=load('custom/operation/collectBaselineServiziData.fs');
permission=view
target=dnamematch:^(formula_administration=Module%3AModelExporter/logo_managedobjects=Administration/root=Generational\\+Models/root=Services|Community=Go/gen_folder=Views/Dashboard=Dashboard/root=Organizations)
type=serverscript

[Export|Download Utenti - Gruppi]
command=
context=element
description=Export|Download Utenti - Gruppi
operation=load('custom/operation/collectUtentiData.fs');
permission=view
target=dname:users=Users/security=Security/root=Administration
type=serverscript

[Export|Elenco Acronimo]
command=
context=element
description=Export|Elenco Acronimo
operation=load('custom/export/ElementExporter.fs');\nAcronimoExporter();\nsession.sendMessage("Export terminato (file C:\\temp\\export_acronimo.csv)");
permission=view
target=dname:formula_administration=Service+Models/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Export|Elenco Map Servizio]
command=
context=element
description=Export|Elenco Map Servizio
operation=state.ModelExporter.exportMapServizi();\nsession.sendMessage("Export terminato (file E:\\application\\noc00\\tlnd\\data\\export_map_nomi_servizi.csv)");
permission=view
target=dname:gen_folder=Servizi/gen_folder=Structure/root=Generational+Models/root=Services
type=serverscript

[Export|Elenco Risorse]
command=
context=element
description=Export|Elenco Risorse
operation=load('custom/export/ElementExporter.fs');\nRisorsaExporter();\nsession.sendMessage("Export terminato (file C:\\temp\\export_risorsa.csv)");
permission=view
target=dname:formula_administration=Service+Models/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Export|Modello NOC to Database]
command=
context=element
description=Export Modello NOC to Database
operation=load('custom/operation/ExportModelloNOC.fs');
permission=view
target=dnamematch:^formula_administration=Module%3AModelExporter/logo_managedobjects=Administration/root=Generational\\+Models/root=Services
type=serverscript

[Mailer|Check alarms count]
command=
context=element
description=Check alarms count
operation=load('custom/alerter/CheckAlarmCount.fs');\nsession.sendMessage('Operation completed');
permission=view
target=dname:formula_administration=Module%3AAlerter/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Mailer|Check Schedule]
command=
context=element
description=Check Schedule
operation=load('custom/alerter/CheckSchedule.fs');\nsession.sendMessage('Operation completed');
permission=view
target=dname:formula_administration=Module%3AAlerter/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Metamodel|Set SI Attrs]
command=
context=element
description=Metamodel|Set SI Attrs
operation=load('custom/mm/Helper/SetSIMetricheAttrs.fs');\nsession.sendMessage('Operation completed');
permission=view
target=dname:PortletView=Servizi+Infrastrutturali/gen_folder=Grafici/Community=Servizi+Infrastrutturali/gen_folder=Views/Dashboard=Dashboard/root=Organizations
type=serverscript

[Rebuild Service Models]
command=
context=element
description=Rebuild Service Models
operation=load('bscm/rebuildServiceModels');
permission=manage
target=dname:formula_administration=Service+Models/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Sdbx|Activate Modello]
command=
context=element
description=Sdbx|Activate Modello
operation=load( "custom/sdbx/ActivateModello.fs" );
permission=manage
target=dnamematch:^gen_folder=Modello/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Add Acronimo]
context=element
description=Sdbx|Add Acronimo
operation=load( "custom/sdbx/AddAcronimo.fs" );
permission=manage
target=dnamematch:(^gen_folder=Acronimi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations)|(Servizio=[^/]*/gen_folder=Servizi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations)
type=serverscript

[Sdbx|Add Servizio]
context=element
description=Sdbx|Add Servizio
operation=load( "custom/sdbx/AddServizio.fs" );
permission=manage
target=dnamematch:^gen_folder=Servizi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Build Staging]
command=
context=element
description=Sdbx|Build Staging
operation=(function () {\nvar _logger = Packages.org.apache.log4j.Logger.getLogger("fs.sdbx.op");\n\ttry {\n\t\tload('custom/sdbx/BuildSdbx.fs');\n\t} catch (excp) {\n\t\t_logger.error('Error building Sdbx : ' + excp);\n\t}\n\t_logger.info('Building Sdbx completed');\n}) ();\nsession.sendMessage('Operation completed');
permission=manage
target=dnamematch:^gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Check Acronimo in Baseline]
command=
context=element
description=Sdbx|Check Acronimo in Baseline
operation=load('custom/sdbx/CheckSdbxAcronimoInBaseline.fs');\nCheckSdbxAcronimoInBaseline.askUser(element);
permission=manage
target=dnamematch:gen_folder=Acronimi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Copy Acronimo To Modello]
context=element
description=Sdbx|Copy Acronimo To Modello
operation=load('custom/sdbx/CopyAcronimoToModello.fs');\nsession.sendMessage('Copy Acronimo To Modello completed');
permission=manage
target=dnamematch:^Acronimo=[^/]*/gen_folder=Acronimi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Copy All Acronimi To Modello]
context=element
description=Sdbx|Copy All Acronimi To Modello
operation=load('custom/sdbx/CopyAllAcronimiToModello.fs');\nsession.sendMessage('Copy All Acronimi To Modell completed');
permission=manage
target=dnamematch:^gen_folder=Acronimi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Imp Sandbox]
command=
context=element
description=Sdbx|Imp Sandbox
operation=load( "custom/modello/impbaseline/SdbxImporter.fs" );
permission=manage
target=dnamematch:^ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Link Modello]
command=
context=element
description=Sdbx|Link Acronimi to Servizi
operation=state.ViewBuilder.build('gen_folder=Servizi/'+element.DName);
permission=manage
target=dnamematch:^gen_folder=Modello/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Refresh Staging]
command=
context=element
description=Sdbx|Refresh Staging
operation=load( "custom/sdbx/RefreshStaging.fs" );
permission=manage
target=dnamematch:^gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Remove Acronimo]
command=
context=element
description=Sdbx|Remove Acronimo
operation=load('custom/sdbx/RemoveAcronimo.fs');
permission=manage
target=dnamematch:(^Acronimo=[^/]*/gen_folder=Acronimi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations)|(Acronimo=[^/]*/Servizio=[^/]*/gen_folder=Servizi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations)
type=serverscript

[Sdbx|Remove Componente Infrastrutturale]
command=
context=element
description=Sdbx|Remove Componente Infrastrutturale
operation=element.perform( session, 'LifeCycle|Delete', [], [] );
permission=manage
target=script:element.elementClassname == 'CompInfra' && element.DName.indexOf('gen_folder=Acronimi/gen_folder=Modello/ISP_FolderBase=Sandbox') != -1
type=serverscript

[Sdbx|Remove Risorsa]
context=element
description=Sdbx|Remove Risorsa
operation=element.perform( session, 'LifeCycle|Delete', [], [] );
permission=manage
target=script:element.elementClassname == 'Risorsa' && element.DName.indexOf('gen_folder=Acronimi/gen_folder=Modello/ISP_FolderBase=Sandbox') != -1
type=serverscript

[Sdbx|Remove Servizio]
context=element
description=Sdbx|Remove Servizio
operation=state.Orgs.deleteElement(element);
permission=manage
target=dnamematch:Servizio=[^/]*/gen_folder=Servizi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Staging|Link Acronimi to Servizi]
command=
context=element
description=Sdbx|Link Acronimi to Servizi
operation=load( "custom/sdbx/LinkStaging.fs" );
permission=manage
target=dnamematch:^gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Sync All Servizi To Modello]
context=element
description=Sdbx|Sync All Servizi To Modello
operation=load('custom/sdbx/SyncServizi.fs');\nsession.sendMessage('Sync Servizi To Modello completed');
permission=manage
target=dnamematch:^gen_folder=Servizi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Sdbx|Sync Servizio To Modello]
command=
context=element
description=Sdbx|Sync Servizio To Modello
operation=load('custom/sdbx/SyncServizioToModello.fs');\nsession.sendMessage('Sync Servizio To Modello completed');
permission=manage
target=dnamematch:^Servizio=[^/]*/gen_folder=Servizi/gen_folder=Staging/ISP_FolderBase=Sandbox.*/root=Organizations
type=serverscript

[Structure|Acronimo|Set Description on Ele]
command=
context=element
description=Structure|Acronimo|Set Description on Ele
operation=state.mm.AcroCatalog.setDescriptionOnEle(element);
permission=manage
target=classmatch:Acronimo*
type=serverscript

[Structure|Acronimo|Set Description On Tree]
command=
context=element
description=Structure|Acronimo|Set Description on Tree
operation=state.mm.AcroCatalog.walkAndSetDescriptionOnOrgs();
permission=manage
target=dname:root=Organizations
type=serverscript

[Structure|Acronimo|Set Display Children]
command=
context=element
description=Structure|Acronimo|Set Display Children
hidden=false
operation=var visitor =\n{\n    count: 0,\n    clazz: '',\n    visit: function ( child )\n    {\n\tclazz = child.elementClassName\n\tif (clazz=='Acronimo')\n        \tchild.DisplaySourceElements="true"\n\t\tvisitor.count++;\n\n    }\n}\nelement.walk ( visitor );\nsession.sendMessage('Set display children on ' + visitor.count + ' element of class Acronimo');
permission=manage
target=namematch:.*
type=serverscript

[Structure|Algorithms|(Re)set highest to subtree]
command=
context=element
description=Structure|Algorithms|(Re)set highest to subtree
operation=function setTwoThirdMajor (ele) {\nvar clazz = ele.elementClassName + '';\nif (clazz=='Acronimo' || clazz=='SSA' || clazz=='CompInfra') {\n\tele.Algorithm='';\n}\nele.algorithmChanged();\n}\nelement.walk(setTwoThirdMajor);\nsession.sendMessage('Changed algorithm to subtree');
permission=manage
target=dnamematch:.*/root=(Organizations|Services)
type=serverscript

[Structure|Algorithms|Set twothirdmajor to subtree]
command=
context=element
description=Structure|Algorithms|Set twothirdmajor to subtree
operation=function resetAlgorithm (ele) {\nvar clazz = ele.elementClassName + '';\nif (clazz=='Acronimo' || clazz=='SSA' || clazz=='CompInfra') {\n\tele.Algorithm='';\n}\nele.algorithmChanged();\n}\nelement.walk(resetAlgorithm);\nsession.sendMessage('Changed algorithm to subtree');
permission=manage
target=dnamematch:.*/root=(Organizations|Services)
type=serverscript

[Structure|Align|Acronimi]
command=
context=element
description=Structure|Align|Acronimi
operation=load('custom/operation/AlignAcronimi.fs')
permission=manage
target=dname:gen_folder=Acronimi/ISP_FolderBase=Production/root=Organizations
type=serverscript

[Structure|Align|Apply Baseline]
command=
context=element
description=Structure|Align|Apply Baseline
operation=load('custom/orgs/AlignModels.fs')
permission=manage
target=dnamematch:.*/root=(Organizations|Services)
type=serverscript

[Structure|Align|Manual Load]
command=
context=element
description=Structure|Align|Manual Load
operation=var loadFromRoot ='gen_folder=Acronimi+-+Caricamento+Manuale/gen_folder=Structure/root=Generational+Models/root=Services'\n\rvar svcMdlAcroRoot='gen_folder=Acronimi/ISP_FolderBase=Production/root=Organizations'\n\rstate.StructMngr.addTemplateEle(loadFromRoot,svcMdlAcroRoot);
permission=manage
target=dnamematch:(gen_folder=Acronimi\\+-\\+Caricamento\\+Manuale/gen_folder=Structure/root=Generational\\+Models/root=Services|gen_folder=Acronimi/ISP_FolderBase=Production/root=Organizations)
type=serverscript

[Structure|Align|Production]
command=
context=element
description=Structure|Align|Production
operation=load('custom/operation/AlignProduction.fs')
permission=manage
target=dname:ISP_FolderBase=Production/root=Organizations
type=serverscript

[Structure|Align|Servizi]
command=
context=element
description=Structure|Align|Servizi
operation=load('custom/operation/AlignServizi.fs')
permission=manage
target=dname:gen_folder=Servizi/gen_folder=Test/gen_folder=Structure/root=Generational+Models/root=Services
type=serverscript

[Structure|Align|Write Map to csv]
command=
context=element
description=Structure|Align|Write Map to csv
operation=state.ModelExporter.exportMapServizi()
permission=manage
target=dname:gen_folder=Servizi/gen_folder=Structure/root=Generational+Models/root=Services
type=serverscript

[Structure|Align|Write Model to csv]
command=
context=element
description=Structure|Align|Write Model to csv
operation=state.ModelExporter.doExport()
permission=manage
target=dnamematch:.*/root=(Organizations|Services)
type=serverscript

[Structure|Apply Model Update]
command=
context=element
description=Structure|Apply Model Update
operation=load('custom/orgs/ModelloUpdateHndlr.fs');
permission=manage
target=dname:formula_administration=Service+Models/logo_managedobjects=Administration/root=Generational+Models/root=Services
type=serverscript

[Structure|Build Acronimo List from Baseline]
command=
context=element
description=Structure|Build Acronimo List from Baseline
operation=load('custom/operation/BuildAcronimo4Baseline.fs');
permission=manage
target=dname:root=Generational+Models/root=Services
type=serverscript

[Structure|Build|Tree set TLC Match]
command=
context=element
description=Structure|Build|Tree set TLC Match
operation=load('custom/operation/SetTlcMatchOnTree.fs');\nsession.sendMessage('Set TLC Match completed');
permission=manage
target=dname:gen_folder=Servizio+TLC/ISP_FolderBase=Production/root=Organizations
type=serverscript

[Structure|CleanUp|Remove Host Datagram]
command=
context=element
description=Structure|CleanUp|Remove Host Datagram
operation=// Remove Datagram element\nvar visitor =\n{\n\n    count: 0,\n   visit: function ( child )\n    {\n        if (child.elementClassName == 'Risorsa' && child.name.indexOf('DATAGRAM') != -1) {\n\t\t\tchild.perform( session, 'LifeCycle|Delete', [], [] );\n\t\t\tvisitor.count++;\n\t\t}\n   }\n}\n// Remove Risorsa=*DATAGRAM*\nelement.walk ( visitor );\n\n//CompInfra=MQHRC*\nvar visitor2 =\n{\n\n    count: 0,\n    visit: function ( child )\n    {\n        if (child.elementClassName == 'CompInfra' \n            && child.name.indexOf('MQHRC') != -1\n            && child.children.length == 0) {\n\t\t\tchild.perform( session, 'LifeCycle|Delete', [], [] );\n\t\t\tvisitor2.count++;\n\t}\n    }\n}\n// Remove CompInfra=MQHRC*\nelement.walk ( visitor2 );\nvar msg =  "Removed " + visitor.count + " Datagram Risorsa " + visitor2.count + " MQHRC CompInfra"\nformula.log.debug( msg );\nsession.sendMessage(msg);
permission=manage
target=namematch:.*
type=serverscript

[Structure|CleanUp|Remove Sources on AcronimoOpVw]
command=
context=element
description=Structure|CleanUp|Remove Sources on AcronimoOpVw
operation=load('custom/operation/RemoveSourceOnAcronimoOpVw.fs');
permission=manage
target=namematch:.*
type=serverscript

[Structure|Collect Pattern to file as Json]
command=
context=element
description=Structure|Collect Pattern to file as Json
operation=load('custom/operation/CollectPattern.fs');\nsession.sendMessage('Collect patterns completed');
permission=manage
target=dnamematch:root=Organizations
type=serverscript

[Structure|Copy From Acronimo Catalog]
command=
context=element
description=Structure|Copy From Acronimo Catalog
operation=load('custom/operation/CopyFromAcroCatalog.fs');
permission=manage
target=dname:root=Organizations
type=serverscript

[Structure|Copy To Service Catalog]
command=
context=element
description=Structure|Copy To Service Catalog
operation=load('custom/orgs/StructureGenerator.fs');
permission=manage
target=class:Risorsa
type=serverscript

[Structure|Export Service Model]
command=
context=element
description=Structure|Export Service Model
operation=load('custom/util/ConsoleModelExporter.fs')\nConsoleModelExporter.exportServizi()\nConsoleModelExporter.exportAcronimi()\nsession.sendMessage('Wrote to E:\\APPLICATION\\NOC00\\NovellOperationsCenter')
permission=manage
target=dname:root=Organizations
type=serverscript

[Structure|Matches|Check Subtree]
command=
context=element
description=Structure|Matches|Check Subtree
operation=load('custom/util/MatchesUtilv2.fs');\nMatches.doCheckMatches(element);
permission=manage
target=dnamematch:.*/root=(Organizations|Services)
type=serverscript

[Structure|Matches|Clear Matches Prop]
command=
context=element
description=Structure|Matches|Clear Matches Prop
operation=element.Matches='';
permission=manage
target=dnamematch:.*/root=(Organizations|Services)
type=serverscript

[Structure|Matches|Dump Matches to Log]
command=
context=element
description=Structure|Matches|Dump Matches to Log
operation=load('custom/util/MatchesToLog.fs');
permission=access
target=dnamematch:.*/root=(Organizations|Services)
type=serverscript

[Structure|Matches|Repair Matches Prop]
command=
context=element
description=Structure|Matches|Repair Element
operation=newMatches = 'LivelloServerRisorsa='+element.match2AlarmExt+'.*/AllarmiSuElementi=AllarmiSuElementi/tAllarmiOUTv2=Adapter%3A\\\\+tAllarmiOUTv2/root=Elements';\nelement.Matches = newMatches;
permission=manage
target=dnamematch:.*/root=(Organizations|Services)
type=serverscript

[Structure|Model|CodaHost|Set Match]
command=
context=element
description=Model|Set Match
operation=load('custom/model/CodaHost.fs');\nformula.log.info('Set Match on ' + element.DName);\nCodaHost.setCodaUnderAcronimoMatch(element);
permission=manage
target=class:CodaHost
type=serverscript

[Structure|Model|CodaOpen|Set Match]
command=
context=element
description=Model|Set Match
operation=load('custom/model/CodaOpen.fs');\nCodaOpen.setMatchUnderCode(element);
permission=manage
target=class:CodaOpen
type=serverscript

[Structure|Rebuild Service Models]
command=
context=element
description=Structure|Rebuild Service Models
operation=load('bscm/rebuildServiceModels.fs');
permission=manage
target=dname:ISP_FolderBase=Production/root=Organizations
type=serverscript

[Structure|Rename|Change Componenti HOST to upper]
command=
context=element
description=Structure|Rename|Change Componenti HOST to upper
operation=/*\n    Change Componenti+HOST 2 uppercase\n    CompInfra=Componenti+HOST/ClasseCompInfra=MQM/Acronimo=PSH%3AES999MB/gen_folder=Acronimi/ISP_FolderBase=Production/root=Organizations\n*/\n\n(function () {\n\nvar visitor = {\ncount: 0,\nvisit: function ( child ) {\nif (child.Name == 'Componenti HOST') {\nformula.log.info('Renaming ' + child.DName);\nvar newname = child.Name.toUpperCase();\nchild.rename(newname, child.elementClassname);\nvisitor.count++;\n}\n}\n}\n\nelement.walk ( visitor );\nformula.log.info('Changed ' + visitor.count + ' elements name to uppercase');\n\n})();
permission=access
target=name:Acronimi
type=serverscript

[Structure|Update]
command=
context=element
description=Structure|Update
operation=var el1=formula.Root.findElement('folder_server=Servers/folder_server=Infrastructure/ISP_FolderBase=Production/root=Organizations');\n\nel1.perform(session, "ViewBuilder|Run", [], []);\n\nel1=null;\n\n\n\nvar el2=formula.Root.findElement('folder_server=Clusters/folder_server=Infrastructure/ISP_FolderBase=Production/root=Organizations');\n\nel2.perform(session, "ViewBuilder|Run", [], []);\n\nel2=null;\n\n\n\nvar el3=formula.Root.findElement('folder_application=Services/ISP_FolderBase=Production/root=Organizations');\n\nel3.perform(session, "ViewBuilder|Run", [], []);\n\nel3=null;
permission=manage
target=dname:ISP_FolderBase=Production/root=Organizations
type=serverscript

[Structure|Update Percorso Page Attr]
command=
context=element
description=Structure|Update Percorso Page Attr
operation=formula.log.info('Update Percorso Page invoked on ' + element);\nload('custom/util/PercorsoPage.fs');\nPercorsoPage.update(element);\nformula.log.info('Update Percorso Page end');
permission=manage
target=class:Risorsa
type=serverscript

[Structure|Util|Delete Alarm Index Page Properties]
command=
context=element
description=Structure|Util|Delete Alarm Index Page Properties
operation=delete element.OpenAlarms\ndelete element.AssignedAndAckAlarms\ndelete element.AlarmWithTicket\ndelete element.OpenAlarmMaxCondition
permission=define
target=class:AcronimoOpVwSdbx
type=serverscript

[Test|Send Test email]
command=
context=element
description=Send Test email
operation=load('custom/lib/Mailer.fs');\nMailer.send('evelino.bomitali@hogwart.it','Test','Body test');\nsession.sendMessage('Test email sent');
permission=view
target=dname:root=Generational+Models/root=Services
type=serverscript

[Test|Show formula.web.server.host]
command=
context=element
description=Test|Show formula.web.server.host
operation=var lwshost = Packages.java.lang.System.getProperty( "formula.web.server.host");\nsession.sendMessage("formula.web.server.host:"+ lwshost);
permission=view
target=dnamematch:^formulaServer=Server/root=Administration
type=serverscript

[Test|Show User]
command=
context=element
description=Test|Show User
operation=var currUser = state.DNamer.getUserFromDname(user.DName);\nsession.sendMessage(currUser);
permission=define
target=dname:security=Security/root=Administration
type=serverscript

[Util|Set Match 2 Acro Catalog]
command=
context=element
description=Util|Set Match 2 Acro Catalog
operation=load('custom/acro/AcroCatalogUtil.fs');\nformula.log.info('Match 2 Acro Catalog Ended');
permission=manage
target=dnamematch:^gen_folder=ServicesToAcro/ISP_FolderBase=Production/root=Organizations
type=serverscript

[View|Build Overview Acronimos]
command=
context=element
description=View|Build Overview Acronimos
operation=load('custom/view/BuildOverviewAcronimos.fs');\nformula.log.info('Build Overview Acronimos Completed');
permission=manage
target=namematch:Overview.-.Acronimos
type=serverscript

[View|Build Overview Acronimos 2]
command=
context=element
description=View|Build Overview Acronimos 2
operation=load('custom/view/BuildOverviewAcronimos2.fs');\nformula.log.info('Build Overview Acronimos 2 Completed');
permission=manage
target=namematch:Overview.-.Acronimos
type=serverscript

[View|Rebuild Banca Koper]
command=
context=element
description=View|Rebuild Banca Koper
operation=var dn1 = 'ClasseCompInfra=BACKUP+INFR./Acronimo=BE_KOPER/PortletView=Banca+Koper+-+Tech+View/gen_folder=Grafici/gen_folder=Banca+Koper/gen_folder=Produzione/Community=Banche+Estere/gen_folder=Views/Dashboard=Dashboard/root=Organizations';\nvar dn2 = 'ClasseCompInfra=DATABASE/Acronimo=BE_KOPER/PortletView=Banca+Koper+-+Tech+View/gen_folder=Grafici/gen_folder=Banca+Koper/gen_folder=Produzione/Community=Banche+Estere/gen_folder=Views/Dashboard=Dashboard/root=Organizations';\nvar dn3 = 'ClasseCompInfra=HOST+OVM/Acronimo=BE_KOPER/PortletView=Banca+Koper+-+Tech+View/gen_folder=Grafici/gen_folder=Banca+Koper/gen_folder=Produzione/Community=Banche+Estere/gen_folder=Views/Dashboard=Dashboard/root=Organizations';\nvar dn4 = 'ClasseCompInfra=HOST+VMWARE/Acronimo=BE_KOPER/PortletView=Banca+Koper+-+Tech+View/gen_folder=Grafici/gen_folder=Banca+Koper/gen_folder=Produzione/Community=Banche+Estere/gen_folder=Views/Dashboard=Dashboard/root=Organizations';\nvar viewElement;\ntry {\r\nviewElement = formula.Root.findElement( dn1 );\r\nviewElement.perform( session, "ViewBuilder|Run", [], [] );\r\n\nviewElement = formula.Root.findElement( dn2 );\nviewElement.perform( session, "ViewBuilder|Run", [], [] );\n\nviewElement = formula.Root.findElement( dn3 );\nviewElement.perform( session, "ViewBuilder|Run", [], [] );\n\nviewElement = formula.Root.findElement( dn4 );\nviewElement.perform( session, "ViewBuilder|Run", [], [] );\n\n} catch( excp ) {\nformula.log.error("ViewBuilder.build error on " + viewElement + ": " + excp );\n}
permission=manage
target=dname:Acronimo=BE_KOPER/PortletView=Banca+Koper+-+Tech+View/gen_folder=Grafici/gen_folder=Banca+Koper/gen_folder=Produzione/Community=Banche+Estere/gen_folder=Views/Dashboard=Dashboard/root=Organizations
type=serverscript

